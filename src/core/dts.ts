import { promises as fs } from 'fs'
import { MODULE_NAME } from './constants'
import type Context from './Context'

export async function generateDeclaration(ctx: Context, filePath: string) {
  //   const body = [
  //     ...Object.entries(imports),
  //     ...Object.entries(resolvedImports)
  //   ]
  //     .sort((a, b) => a[0].localeCompare(b[0]))
  //     .map(([name, info]) => `  const ${name}: typeof import('${info.path}')${info.importName !== '*' ? `['${info.importName || name}']` : ''}`)
  //     .join('\n')

  const body = 'const Logo: typeof import(\'./assets/images/logo.png\')[\'default\']'
  const dtsCode = `// Generated by '${MODULE_NAME}'
// We suggest you to commit this file into source control
declare global {
  ${body}
}

export {}
`
  await fs.writeFile(filePath, dtsCode, 'utf-8')
}
